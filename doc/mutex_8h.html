<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>Foundation Library: /Users/mjansson/projects/foundation_lib/foundation/mutex.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">Foundation Library
   </div>
   <div id="projectbrief">Cross-platform application foundation library in C</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_5c02a266b809652a081fe9248161d9c6.html">foundation</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">mutex.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>Mutex for thread synchronization and signalling.  
<a href="#details">More...</a></p>
<div class="textblock"><code>#include &lt;<a class="el" href="platform_8h_source.html">foundation/platform.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="types_8h_source.html">foundation/types.h</a>&gt;</code><br />
</div>
<p><a href="mutex_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a07966dda74e1aea62b19d4dd0dc339ab"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> <a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a07966dda74e1aea62b19d4dd0dc339ab">mutex_allocate</a> (const char *name)</td></tr>
<tr class="memdesc:a07966dda74e1aea62b19d4dd0dc339ab"><td class="mdescLeft">&#160;</td><td class="mdescRight">Allocate mutex.  <a href="#a07966dda74e1aea62b19d4dd0dc339ab">More...</a><br /></td></tr>
<tr class="separator:a07966dda74e1aea62b19d4dd0dc339ab"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9a5610e3fcd43b99f2b00be586261395"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a9a5610e3fcd43b99f2b00be586261395">mutex_deallocate</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a9a5610e3fcd43b99f2b00be586261395"><td class="mdescLeft">&#160;</td><td class="mdescRight">Deallocate mutex.  <a href="#a9a5610e3fcd43b99f2b00be586261395">More...</a><br /></td></tr>
<tr class="separator:a9a5610e3fcd43b99f2b00be586261395"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8a1328e6b27ee8ad9bd1fb6064d69437"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> const char *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a8a1328e6b27ee8ad9bd1fb6064d69437">mutex_name</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a8a1328e6b27ee8ad9bd1fb6064d69437"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get mutex name.  <a href="#a8a1328e6b27ee8ad9bd1fb6064d69437">More...</a><br /></td></tr>
<tr class="separator:a8a1328e6b27ee8ad9bd1fb6064d69437"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab4793334e248160ebcb1b4a8bba93806"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#ab4793334e248160ebcb1b4a8bba93806">mutex_try_lock</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:ab4793334e248160ebcb1b4a8bba93806"><td class="mdescLeft">&#160;</td><td class="mdescRight">Try to lock mutex without blocking.  <a href="#ab4793334e248160ebcb1b4a8bba93806">More...</a><br /></td></tr>
<tr class="separator:ab4793334e248160ebcb1b4a8bba93806"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a854e7d51da5d11f1a1301b2d0daf4642"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a854e7d51da5d11f1a1301b2d0daf4642">mutex_lock</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a854e7d51da5d11f1a1301b2d0daf4642"><td class="mdescLeft">&#160;</td><td class="mdescRight">Lock mutex blocking.  <a href="#a854e7d51da5d11f1a1301b2d0daf4642">More...</a><br /></td></tr>
<tr class="separator:a854e7d51da5d11f1a1301b2d0daf4642"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8d56c416448ec682366396e31a6b0fcb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a8d56c416448ec682366396e31a6b0fcb">mutex_unlock</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a8d56c416448ec682366396e31a6b0fcb"><td class="mdescLeft">&#160;</td><td class="mdescRight">Unlock mutex.  <a href="#a8d56c416448ec682366396e31a6b0fcb">More...</a><br /></td></tr>
<tr class="separator:a8d56c416448ec682366396e31a6b0fcb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a530dfd47311f701ad3b8bfa261d1b356"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a530dfd47311f701ad3b8bfa261d1b356">mutex_wait</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex, unsigned int timeout)</td></tr>
<tr class="memdesc:a530dfd47311f701ad3b8bfa261d1b356"><td class="mdescLeft">&#160;</td><td class="mdescRight">Wait for signal blocking.  <a href="#a530dfd47311f701ad3b8bfa261d1b356">More...</a><br /></td></tr>
<tr class="separator:a530dfd47311f701ad3b8bfa261d1b356"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6da3b66255457bb776b910ada1d68a7c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a6da3b66255457bb776b910ada1d68a7c">mutex_signal</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a6da3b66255457bb776b910ada1d68a7c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Signal mutex.  <a href="#a6da3b66255457bb776b910ada1d68a7c">More...</a><br /></td></tr>
<tr class="separator:a6da3b66255457bb776b910ada1d68a7c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a7a631379ea824f4d42dc312e4f584e4c"><td class="memItemLeft" align="right" valign="top"><a class="el" href="platform_8h.html#ab5d798081ff1e38fc8d86a56b852da8e">FOUNDATION_API</a> void *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="mutex_8h.html#a7a631379ea824f4d42dc312e4f584e4c">mutex_event_object</a> (<a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *mutex)</td></tr>
<tr class="memdesc:a7a631379ea824f4d42dc312e4f584e4c"><td class="mdescLeft">&#160;</td><td class="mdescRight">Get OS handle.  <a href="#a7a631379ea824f4d42dc312e4f584e4c">More...</a><br /></td></tr>
<tr class="separator:a7a631379ea824f4d42dc312e4f584e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>Mutex for thread synchronization and signalling.</p>
<p>A mutex (mutually exclusive) provides the means to synchronize threads. A mutex can only be locked by one thread at any given time, and another thread that tries to acquire a lock will be suspended until the lock is released by the first thread.</p>
<p>A mutex can also be used to signal a thread to wake up from a sleeping state. The sleeper thread should use the wait method, and then the signal method can be used to trigger the thread to wake up. Locks on the mutex can be used to synchronize execution between multiple sleeper threads.</p>
<p>Foundation mutexes are reentrant, a thread can call lock multiple times from the same thread without blocking. The same number of matching unlock calls have to be done before mutex is actually unlocked for other threads to access. </p>

<p>Definition in file <a class="el" href="mutex_8h_source.html">mutex.h</a>.</p>
</div><h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a07966dda74e1aea62b19d4dd0dc339ab"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> * mutex_allocate </td>
          <td>(</td>
          <td class="paramtype">const char *&#160;</td>
          <td class="paramname"><em>name</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Allocate new mutex and allocate system resources </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">name</td><td>Mutex name (does not have to be unique) </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>New mutex </dd></dl>

</div>
</div>
<a class="anchor" id="a9a5610e3fcd43b99f2b00be586261395"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutex_deallocate </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Deallocate mutex and free system resources </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a8a1328e6b27ee8ad9bd1fb6064d69437"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">const char * mutex_name </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get mutex name </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Mutex name, 0 if invalid mutex or no name </dd></dl>

</div>
</div>
<a class="anchor" id="ab4793334e248160ebcb1b4a8bba93806"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutex_try_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Try to lock mutex but do not block if unavailable </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if mutex was locked, false if mutex already locked by another thread </dd></dl>

</div>
</div>
<a class="anchor" id="a854e7d51da5d11f1a1301b2d0daf4642"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutex_lock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Lock mutex and block if unavailable </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if mutex was locked, false if error </dd></dl>

</div>
</div>
<a class="anchor" id="a8d56c416448ec682366396e31a6b0fcb"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutex_unlock </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Unlock mutex </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if mutex was unlocked, false if error or mutex still locked or if the mutex was not locked by the calling thread </dd></dl>

</div>
</div>
<a class="anchor" id="a530dfd47311f701ad3b8bfa261d1b356"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool mutex_wait </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">unsigned int&#160;</td>
          <td class="paramname"><em>timeout</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Block and wait for signal. If a signal was received and this function returns true, the mutex will be locked and must be unlocked when not needed anymore. If the function returns false, a timeout or error occurred and the mutex will NOT be locked. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
    <tr><td class="paramname">timeout</td><td>Timeout in milliseconds, infinite wait if set to 0 </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if signal received, false if timeout or error </dd></dl>

</div>
</div>
<a class="anchor" id="a6da3b66255457bb776b910ada1d68a7c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void mutex_signal </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Signal mutex and wake up threads waiting for a signal on the mutex. </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a class="anchor" id="a7a631379ea824f4d42dc312e4f584e4c"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void * mutex_event_object </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="types_8h.html#aa92625bf5bdfa3a256071fece1a9a758">mutex_t</a> *&#160;</td>
          <td class="paramname"><em>mutex</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Windows only, get OS handle for event object </p><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">mutex</td><td>Mutex </td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>Event object handle </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Dec 8 2014 13:26:44 for Foundation Library by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.8
</small></address>
</body>
</html>
